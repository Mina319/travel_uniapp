{"version":3,"file":"my.js","sources":["pages/my/my.vue","D:/Program Files/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<view class=\"topBox\">\r\n\t\t\t<view class=\"setBox\">\r\n\t\t\t\t<view class=\"set-left\">\r\n\t\t\t\t\t<uni-icons type=\"calendar\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<view class=\"txt\">签到</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"set-right\">\r\n\t\t\t\t\t<uni-icons type=\"gear\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"users\" @click=\"setFun\">\r\n\t\t\t\t<view class=\"u-top\">\r\n\t\t\t\t\t<template v-if=\"!userInfo.nickName\">\r\n\t\t\t\t\t\t<image src=\"../../static/tt.jpg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">注册 / 登录</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">\r\n\t\t\t\t\t\t\t{{ userInfo.nickName }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"u-bottom\">\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">喜欢</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">浏览</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">收藏</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t</view>\n</template>\n\r\n\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { onLoad} from '@dcloudio/uni-app'\r\nimport { login, getUserInfo } from '../../api/api'\r\n\r\nonLoad(() => {\r\n\t// uni.getUserProfile({\r\n\t// \tdesc: \"获取用户头像和昵称\",\r\n\t// \tsuccess(res) {\r\n\t// \t\tconsole.log(res, 'success')\r\n\t// \t},\r\n\t// \tfail(err) {\r\n\t// \t\tconsole.log(err, 'fail')\r\n\t// \t}\r\n\t// })\r\n})\r\n\r\nconst userInfo = reactive({\r\n\tnickName: '',\r\n\tavatarUrl: ''\r\n})\r\n\r\n\t\n\nconst setFun = () => {\n\t// 给用户一个确认的提醒\n\tuni.showModal({\n\t\ttitle: \"温馨提示\",\n\t\tcontent: \"亲，微信授权登录后才能正常使用小程序\",\n\t\tsuccess(res) {\n\t\t\tif (res.confirm) {\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: async (data) => {\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tconst { token } = await login(data.code)\r\n\t\t\t\t\t\tconsole.log(token, 'token')\r\n\t\t\t\t\t\tuni.setStorageSync('token', token)\r\n\t\t\t\t\t\t// 根据token获取用户信息\r\n\t\t\t\t\t\tconst { avatarUrl, nickName } = await getUserInfo()\r\n\t\t\t\t\t\tuserInfo.avatarUrl = avatarUrl\r\n\t\t\t\t\t\tuserInfo.nickName = nickName\r\n\t\t\t\t\t}\r\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t});\n}\n\r\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\r\n\theight: 100vh;\r\n\tbackground-color: #f5f5f5;\r\n\t.topBox {\r\n\t\twidth: 100%;\r\n\t\tposition: relative;\r\n\t\tz-index: 1;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 40rpx 20rpx 40rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t.topBox::after {\r\n\t\tcontent: \"\";\r\n\t\twidth: 140%;\r\n\t\theight: 200px;\r\n\t\tposition: absolute;\r\n\t\tz-index: -1;\r\n\t\ttop: 0;\r\n\t\tleft: -20%;\r\n\t\tbackground-color: #00aaff;\r\n\t\tborder-radius: 0 0 50% 50%;\r\n\t}\r\n\t.setBox {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t.set-left {\r\n\t\t\twidth: 18%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\t.txt {\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t}\r\n\t.users {\r\n\t\tmargin-top: 35rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\theight: 280rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: 1px 10rpx 20rpx #ececec;\r\n\t\tborder-radius: 16rpx;\r\n\t\t.u-top {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t}\r\n\t\timage {\r\n\t\t\twidth: 100rpx;\r\n\t\t\theight: 100rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tmargin-right: 20rpx;\r\n\t\t}\r\n\t\t.tit {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tfont-weight: 700;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.u-bottom {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\talign-items: center;\r\n\t\t\t.u-item {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\t.u-tit {\r\n\t\t\t\t\tcolor: #757575;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.num {\r\n\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\tfont-size: 33rpx;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n</style>\n","import MiniProgramPage from 'E:/my-vue/uni-app/travel_uniapp/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","reactive","uni","login","getUserInfo"],"mappings":";;;;;;;;;;;;;;;AAyDAA,kBAAAA,OAAO,MAAM;AAAA,IAUb,CAAC;AAED,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,WAAW;AAAA,IACZ,CAAC;AAID,UAAM,SAAS,MAAM;AAEpBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,QAAQ,KAAK;AACZ,cAAI,IAAI,SAAS;AAChBA,0BAAAA,MAAI,MAAM;AAAA,cACT,SAAS,OAAO,SAAS;AACxBA,8BAAAA,MAAY,MAAA,OAAA,yBAAA,IAAI;AAChB,sBAAM,EAAE,MAAO,IAAG,MAAMC,QAAAA,MAAM,KAAK,IAAI;AACvCD,8BAAAA,MAAY,MAAA,OAAA,yBAAA,OAAO,OAAO;AAC1BA,oCAAI,eAAe,SAAS,KAAK;AAEjC,sBAAM,EAAE,WAAW,SAAU,IAAG,MAAME,QAAAA,YAAa;AACnD,yBAAS,YAAY;AACrB,yBAAS,WAAW;AAAA,cACpB;AAAA,YACN,CAAK;AAAA,UACD;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjGA,GAAG,WAAW,eAAe;"}