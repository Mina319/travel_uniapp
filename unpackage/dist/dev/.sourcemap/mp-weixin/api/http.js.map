{"version":3,"file":"http.js","sources":["api/http.js"],"sourcesContent":["let baseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\r\n\r\n// 通过环境来判断\r\nif (process.env.NODE_ENV === 'development') {\r\n\t// baseUrl = 'http://localhost:5173/api'\r\n\tbaseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\r\n} else {\r\n\tbaseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\r\n}\r\n\r\nexport default function http(url, data={}, method = 'GET') {\r\n\t// 对外支持链式调用\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: baseUrl + url,\r\n\t\t\tdata,\r\n\t\t\tmethod,\r\n\t\t\theader: {\r\n\t\t\t\t'token': uni.getStorageSync('token') || ''\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\t// http 状态码\r\n\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tresolve(res.data.data)\r\n\t\t\t\t\t} else if (res.data.code == 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treject(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '服务器请求异常',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}"],"names":["uni"],"mappings":";;AAAA,IAAI,UAAU;AAG8B;AAEjC,YAAA;AACX;AAIA,SAAwB,KAAK,KAAK,OAAK,CAAA,GAAI,SAAS,OAAO;AAE1D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,UAAU;AAAA,MACf;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,QACP,SAASA,cAAA,MAAI,eAAe,OAAO,KAAK;AAAA,MACzC;AAAA,MACA,SAAS,CAAO,QAAA;AAEX,YAAA,IAAI,cAAc,KAAK;AACtB,cAAA,IAAI,KAAK,QAAQ,GAAG;AACf,oBAAA,IAAI,KAAK,IAAI;AAAA,UACX,WAAA,IAAI,KAAK,QAAQ,GAAG;AAC9BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YAAA,CACN;AACM,mBAAA,IAAI,KAAK,GAAG;AAAA,UACpB;AAAA,QACD;AAAA,MACD;AAAA,MACA,MAAM,MAAM;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA,CACA;AAAA,EAAA,CACD;AACF;;"}