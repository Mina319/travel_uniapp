{"version":3,"names":["baseUrl","baseURL","http","url","data","arguments","length","undefined","method","Promise","resolve","reject","common_vendor","index","request","header","getStorageSync","success","res","statusCode","code","showToast","title","msg","icon","fail"],"sources":["http.js"],"sourcesContent":["let baseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\r\n\r\n// 通过环境来判断\r\nif (process.env.NODE_ENV === 'development') {\r\n\tbaseURL= 'http://localhost:5173/api'\r\n} else {\r\n\tbaseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\r\n}\r\n\r\nexport default function http(url, data={}, method = 'GET') {\r\n\t// 对外支持链式调用\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: baseUrl + url,\r\n\t\t\tdata,\r\n\t\t\tmethod,\r\n\t\t\theader: {\r\n\t\t\t\t'token': uni.getStorageSync('token') || ''\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\t// http 状态码\r\n\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tresolve(res.data.data)\r\n\t\t\t\t\t} else if (res.data.code == 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treject(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '服务器请求异常',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}"],"mappings":";;;;AAAA,IAAIA,OAAA,GAAU;AAG8B;EAClCC,OAAA;AACV;AAIA,SAAwBC,KAAKC,GAAA,EAA8B;EAAA,IAAzBC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAK;EAAA,IAAIG,MAAA,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAS;EAEnD,OAAO,IAAII,OAAA,CAAQ,UAACC,OAAA,EAASC,MAAA,EAAW;IACvCC,aAAA,CAAAC,KAAA,CAAIC,OAAA,CAAQ;MACXX,GAAA,EAAKH,OAAA,GAAUG,GAAA;MACfC,IAAA,EAAAA,IAAA;MACAI,MAAA,EAAAA,MAAA;MACAO,MAAA,EAAQ;QACP,SAASH,aAAA,CAAAC,KAAA,CAAIG,cAAA,CAAe,OAAO,KAAK;MACzC;MACAC,OAAA,EAAS,SAATA,QAAgBC,GAAA;QAEX,IAAAA,GAAA,CAAIC,UAAA,IAAc,KAAK;UACtB,IAAAD,GAAA,CAAId,IAAA,CAAKgB,IAAA,IAAQ,GAAG;YACfV,OAAA,CAAAQ,GAAA,CAAId,IAAA,CAAKA,IAAI;UACX,WAAAc,GAAA,CAAId,IAAA,CAAKgB,IAAA,IAAQ,GAAG;YAC9BR,aAAA,CAAAC,KAAA,CAAIQ,SAAA,CAAU;cACbC,KAAA,EAAOJ,GAAA,CAAId,IAAA,CAAKmB,GAAA;cAChBC,IAAA,EAAM;YAAA,CACN;YACMb,MAAA,CAAAO,GAAA,CAAId,IAAA,CAAKmB,GAAG;UACpB;QACD;MACD;MACAE,IAAA,EAAM,SAANA,KAAA,EAAY;QACXb,aAAA,CAAAC,KAAA,CAAIQ,SAAA,CAAU;UACbC,KAAA,EAAO;UACPE,IAAA,EAAM;QAAA,CACN;MACF;IAAA,CACA;EAAA,CACD;AACF","ignoreList":[]}